{% load static %}
<!DOCTYPE html>
<html>
<head>
    {% block title %}
    {% endblock %}
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
    <nav style="display:flex; align-items: center; justify-content: space-around; gap:10px">
        <a href="/">Home</a> 
        {% if user.is_authenticated %}
            |
            <form action="{% url 'logout' %}" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" style="background: none; border: none; color: blue; text-decoration: underline; cursor: pointer; padding: 0;">
                    Logout
                </button>
            </form>
        {% endif %}
    </nav>
    {% if user.is_authenticated %}
        <p>Welcome, {{ user.username }}</p>
    {% endif %}

    {% if messages %}
        <div class="messages">
            {% for message in messages %}
                <div class="alert {{ message.tags }}" id="msg-{{ forloop.counter }}">
                    {{ message }}
                    <button class="close-btn" onclick="closeMessage('msg-{{ forloop.counter }}')">&times;</button>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="container">
        {% block content %}
        {% endblock %}
    </div>

</body>
<script>
    function closeMessage(id) {
        const element = document.getElementById(id);
        element.style.opacity = "0";
        setTimeout(() => {
            element.remove();
        }, 500); // Wait for fade out animation
    }

    // Auto-hide messages after 5 seconds
    setTimeout(() => {
        const alerts = document.querySelectorAll('.alert');
        alerts.forEach(alert => {
            alert.style.transition = "opacity 0.5s ease";
            alert.style.opacity = "0";
            setTimeout(() => alert.remove(), 500);
        });
    }, 5000);
</script>
</html>